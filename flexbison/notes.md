## Chapter1

lex 程序包含：

1. 声明部分
2. 规则部分
3. C 代码部分

`fb1-1.l`  记录了 `words` 和 `chars`, 在 

```lex
%{

%}
```

在上面定义了 vars，然后在下面定义了规则

```
%%
%%
```

`fb1-2.l` 就更简单了，直接 `printf`, 这两个都是只有 flex 的程序。生成词法分析器就可以了。

`fb1-3.l` 定义了计算器和打印。flex 里面，使用词法分析器来获得一个 token stream, 利用 `yylex` 读取一小部分输入，然后吐出 token.

“如果一个模式不能够产生 token，那么`yylex` 会继续，否则会等待下次调用”

比如  `fb1-3.l` 下面那个 `[ \t]` 就没返回：

```lex
[0-9]+	{ printf("NUMBER %s\n", yytext); }
\n      { printf("NEWLINE\n"); }
[ \t] { }
```

这里定义了一个简单的雏形，下面需要引入 bison 来处理

---

`fb1-5.l` 和 `fb1-5.y` 引入了 bison 来处理。`.y` 程序 `include` 

这个地方实现了一个完整的加法计算器，在 `Makefile.ch1` 里面有完整的逻辑。这个 1.5 涉及了：

* `flex` 定义了 `yylval` 保存值
* 大小括号
* `bison` 定义了 `factor` 和 `exp` 处理优先级
* 定义 `OP` `CP` 来处理

（其实我能很清楚说出为什么这个能计算加减乘除，但是说不清楚这个优先级是怎么定义的）

----





